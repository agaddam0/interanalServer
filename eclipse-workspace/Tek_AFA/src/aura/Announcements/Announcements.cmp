<aura:component controller="AnnouncementController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    
    <aura:attribute name="RecordTypeName" type="String" />
    
    <aura:attribute name="wrapper" type="Object[]" />
    <aura:attribute name="isOpen" type="Boolean" />
    <aura:attribute name="videoURL" type="String" />
    
    <aura:registerEvent name="PageLoaded" type="c:TaskCompleteEvent" />
    
    <div class="{! v.wrapper != null ? 'slds-show slds-box slds-theme_default oneContent active announcement-container' : 'slds-hide'}">
        <div class="{! v.wrapper.length &lt; 2 ? '' : 'slds-grid slds-wrap'}">
        
        <aura:if isTrue="{! v.wrapper.length > 1 }">
            <div class="chevron-left slds-size_1-of-12">
                <lightning:buttonIcon iconName="utility:chevronleft" variant="brand"
                                      onclick="{! c.navToPreviousItem }" size="medium"
                                      title="Previous" />
            </div>
        </aura:if>
        
        <div class="{! v.wrapper.length > 1 ? 'slds-box carousel-width slds-size_10-of-12' : ''}">
            
            <div class="">
                <aura:if isTrue="{! v.wrapper.length > 0 }">
                    <div class="slds-carousel">
                        
                        <div class="slds-carousel__stage slds-m-horizontal_medium">
                            <div aura:id="carouselPanels" class="slds-carousel__panels" style="transform:translateX(-0%)">
                                <aura:iteration items="{!v.wrapper}" var="wrapper" indexVar="wrapperNum">
                                    <div class="slds-carousel__panel slds-p-around_medium af-carousel-panel"
                                         data-item-num="{! wrapperNum }" role="tabpanel">
                                        
                                        <div class="slds-grid">
                                            <div class="slds-col">
                                                <img src="{!$Resource.ShoppingCartIcons + '/Icons/Marketing_News_01.png'}" class="af-marketing-news-icon slds-horizontal-left_medium" />

                                                <p class="news-title slds-size_3-of-12 slds-text-heading_large">MARKETING NEWS</p>
                                            </div>
                                        
                                         

                                            <div class="slds-size_9-of-12">
                                                <div class="slds-text-heading_medium announcement-header">
                                                    {!wrapper.Announcement.Headline__c}            
                                                </div>
                                                
                                                <div class="slds-grid slds-p-around_large">
                                                    <div class="slds-size_2-of-12">
                                                        <a onclick="{!c.openModal}" data-url="{!wrapper.Announcement.Video_URL__c}" >
                                                            <img src='{!wrapper.ThumbnailURL}' title="Click to watch video" class="af-image" />
                                                        </a>
                                                    </div>
                                                    
                                                    <div class="slds-size_9-of-12 slds-grid slds-wrap slds-p-left_large">
                                                        
                                                        <div class="slds-size_8-of-8 slds-p-bottom_small">
                                                            <aura:unescapedHTML value="{!wrapper.Announcement.Announcement__c}"/>
                                                        </div>
                                                        
                                                        <div class="slds-size_7-of-8 slds-grid slds-wrap">
                                                            <div class="slds-size_1-of-2 slds-p-vertical_xx-small">
                                                                <a href="{!wrapper.Announcement.Link_1_URL__c}" target="_blank" class="brandLink">
                                                                    {!wrapper.Announcement.Link_1_Name__c}
                                                                </a>
                                                            </div>
                                                            <div class="slds-size_1-of-2 slds-p-vertical_xx-small">
                                                                <a href="{!wrapper.Announcement.Link_2_URL__c}" target="_blank" class="brandLink">
                                                                    {!wrapper.Announcement.Link_2_Name__c}
                                                                </a>
                                                            </div>
                                                            <div class="slds-size_1-of-2 slds-p-vertical_xx-small">
                                                                <a href="{!wrapper.Announcement.Link_3_URL__c}" target="_blank" class="brandLink">
                                                                    {!wrapper.Announcement.Link_3_Name__c}
                                                                </a>
                                                            </div>
                                                            <div class="slds-size_1-of-2 slds-p-vertical_xx-small">
                                                                <a href="{!wrapper.Announcement.Link_4_URL__c}" target="_blank" class="brandLink">
                                                                    {!wrapper.Announcement.Link_4_Name__c}
                                                                </a>
                                                            </div>
                                                            <div class="slds-size_1-of-2 slds-p-vertical_xx-small">
                                                                <a href="{!wrapper.Announcement.Link_5_URL__c}" target="_blank" class="brandLink">
                                                                    {!wrapper.Announcement.Link_5_Name__c}
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </aura:iteration>
                            </div>
                            
                            
                        </div>
                        
                    </div>
                </aura:if>
            </div>        
        </div>
        
        <aura:if isTrue="{! v.wrapper.length > 1 }">
            <div class="chevron-right slds-size_1-of-12 ">
                <lightning:buttonIcon iconName="utility:chevronright" variant="brand"
                                      onclick="{! c.navToNextItem }" size="medium"
                                      title="Next" class="slds-float_right" />
            </div>
        </aura:if>
        
        <aura:if isTrue="{! v.wrapper.length > 1 }">
            <ul class="slds-carousel__indicators slds-size_12-of-12 slds-text-align_center" role="tablist">
                <aura:iteration items="{!v.wrapper}" var="wrapper" indexVar="wrapperNum">
                    <li class="slds-carousel__indicator" role="presentation">
                        <a class="{! wrapper.ShowInCarousel ? 'slds-carousel__indicator-action slds-is-active' : 'slds-carousel__indicator-action' }"
                           href="javascript:void(0);" role="tab" tabindex="0"
                           onclick="{! c.onCarouselIndicatorClick }"
                           aura:id="carouselIndicator"
                           data-item-num="{! wrapperNum }">
                            <span class="slds-assistive-text">Visit Announcement</span>
                        </a>
                    </li>
                </aura:iteration>
            </ul>
        </aura:if>
        </div>
    </div>
    
    <!-- Video modal begin -->
    <aura:if isTrue="{!v.isOpen}">
        <div style="height:640px">
        	<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open af-modal">
            	<div class="af-modal_container">
                	<header class="slds-modal__header slds-modal__header_empty">
                    	<lightning:buttonIcon iconName="utility:close" class="slds-modal__close" variant="bare-inverse" 
                                              onclick="{!c.closeModal}" size="large"/>
                    </header>
                    <div class="slds-modal__content slds-grow" style="overflow:hidden">
                        <iframe height="640px" width="100%" src="{!v.videoURL}" />
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div>        
    </aura:if>
    <!-- Video modal end -->
	
</aura:component>