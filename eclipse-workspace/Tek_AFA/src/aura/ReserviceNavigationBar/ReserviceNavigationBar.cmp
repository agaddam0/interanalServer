<aura:component extends="c:ReserviceComponentContainer">
    <aura:attribute name="opportunityId" type="String" />
    
    <aura:handler event="c:ReserviceNavigationEvent" action="{!c.setActiveTabs}" />
    
    <aura:attribute name="currentSetupReviewActive" type="Boolean" default="true" />
    <aura:attribute name="quickSetupActive" type="Boolean" default="false" />
    <aura:attribute name="showConfirmModal" type="Boolean" access="private" default="false" />
    <aura:attribute name="goToPreEnrollmentMarketingForm" type="Boolean" access="private" default="false" />
    <aura:attribute name="validForms" type="Boolean" access="private" default="false" />
    <aura:attribute name="disableSubmitButton" type="Boolean" access="private" default="true" />
    <aura:attribute name="preEnrollmentMarketingFormId" type="String" access="private" />
    <aura:attribute name="quickSetupClickable" type="Boolean" access="private" default="false" />
    <aura:attribute name="requestEditMessage" type="String" access="private" default=""/>
    <aura:attribute name="showRequestEdit" type="Boolean" access="private" default="false" />
    <aura:attribute name="showSubmitButton" type="Boolean" access="private" default="false" />
    <aura:attribute name="statusMessage" type="String" access="private" />
    <aura:attribute name="showSpinner" type="Boolean" access="private" default="false" />
    <aura:attribute name="showUnlockRequest" type="Boolean" access="private" default="false" />
    
    <aura:registerEvent name="validateFormEvent" type="c:ReserviceValidateForms" />
    <aura:registerEvent name="disableFormEvent" type="c:ReserviceDisableFormEvent" />
    
    <aura:method name="displaySubmitButton" />
    <aura:method name="canSubmit">
        <aura:attribute name="isValid" type="Boolean" />
    </aura:method>
    <aura:method name="setStatus">
        <aura:attribute name="Status" type="String" />
        <aura:attribute name="RequestEdit" type="Boolean" />
    </aura:method>
    <aura:method name="submitFormFromComponent" />
    <aura:method name="setEnrollmentFormId">
        <aura:attribute name="enrollmentId" type="String"/>
    </aura:method>

    <div class="af-nav-component">
        <div class="af-nav-menu">
            <ul>
                <li class="{! v.quickSetupActive ? 'active' : '' }"><a onclick="{! c.navigateToQuickSetup }">Quick Setup</a></li>
                <li class="{! v.currentSetupReviewActive ? 'active' : '' }"><a onclick="{!c.navigateToSummary}">Current Setup Review</a></li>
            </ul>
        </div>
        <div class="af-nav-button-container">
            
            <span class="status-text">
            	{!v.statusMessage}{!v.requestEditMessage}
            </span>
            
            <lightning:button variant="neutral" class="{! v.showSubmitButton ? 'af-progress-button' : 'af-progress-button slds-hide'}" disabled="{!v.disableSubmitButton}" onclick="{! c.submitForm }" >Submit</lightning:button>
            <lightning:button variant="neutral" class="{! v.showRequestEdit ? 'af-warning-button' : 'af-warning-button slds-hide'}" onclick="{! c.requestEdit}">Request Edit</lightning:button>
            <c:UnlockRequest aura:id="unlockRequest" class="{! v.showUnlockRequest ? 'slds-show' : 'slds-hide'}" 
                            unlockTheForm="{!c.unlockForm}"/>
            
        </div>
        <div class="slds-p-left_large">
        	<a onclick="{! c.navigateToOpportunity }">Back to Enrollment Opportunity</a>
        </div>
    </div>
    
    <div class="{! v.showSpinner ? 'loadingSpinner' : 'loadingSpinner slds-hide'}">
        <lightning:spinner alternativeText="Loading" size="large" />
    </div>
    
    <!-- confirmation modal -->
    
    <div class="{! v.showConfirmModal ? 'slds-show' : 'slds-hide'}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <lightning:buttonIcon alternativeText="Close" onclick="{! c.closeModal }" iconName="utility:close" size="large" variant="bare-inverse" class="slds-modal__close" title="Close" />
                    
                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Confirm</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <span>
                        {! $Label.c.Go_To_PreEnrollment_Page_Verbiage }
                    </span>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_brand" onclick="{! c.navigateToPreEnrollment }" >Yes</button>
                    <button class="slds-button slds-button_neutral" onclick="{! c.navigateToOpportunity }">No</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </div>
    
	
</aura:component>