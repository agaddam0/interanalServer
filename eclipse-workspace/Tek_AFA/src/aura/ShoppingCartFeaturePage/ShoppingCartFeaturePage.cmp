<aura:component controller="ShoppingCartController">
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler event="aura:doneRendering" action="{!c.removeImageContextMenu}"/>
    <aura:attribute name="isDoneRendering" type="Boolean" default="false" />
    <aura:attribute name="featuredItems" type="Object[]" />

    <aura:registerEvent name="navigate" type="c:ShoppingCartNavigationEvent" />
    <aura:registerEvent name="PageLoaded" type="c:TaskCompleteEvent" />
    
    <aura:if isTrue="{! v.featuredItems.length > 0 }">
        <div class="af-featured-items-container">
            <aura:iteration items="{!v.featuredItems}" var="featuredItem" indexVar="featureItemNum">                   
                <div class="slds-box slds-theme_default">
                    <div class="slds-grid slds-grid_vertical slds-grid_align-center slds-grid_vertical-align-center">
                        <div>
                            <div class="slds-text-heading_medium slds-text-color_weak slds-m-bottom_medium slds-text-align_center">
                                <span class="af-clickable af-feature-title" data-recId="{!featuredItem.Record.Id}" onclick="{! c.onFeaturedItemClick }">
                                    {! featuredItem.Record.Feature_Header__c }
                                </span>
                            </div>
                        </div>

                        <div>
                            <div class="image-container">
                                <img class="featureImage af-clickable" src='{! featuredItem.Record.Thumbnail_URL__c }'
                                        data-recId="{!featuredItem.Record.Id}" onclick="{! c.onFeaturedItemClick }" />
                                <aura:renderIf isTrue="{!featuredItem.Record.New__c == true}">
                                    <div class="corner-triangle"><span class="triangle-text">New!</span></div>
                                </aura:renderIf>
                            </div>
                        </div>

                        <div class="slds-m-top_medium">
                            <p>
                                {!featuredItem.Record.Description__c}
                            </p>
                        </div>

                        <div class="slds-m-top_medium">
                            <div class="favorite">
                                <button class="slds-button slds-button_icon slds-button_icon-bare" 
                                        data-favorite="{! featuredItem.IsFavorite}" data-recId="{! featuredItem.Record.Id}"
                                        onclick="{!c.toggleFavorite}">
                                    <img src="{!$Resource.ShoppingCartIcons + '/Icons/05_heart.png'}" class="{! featuredItem.IsFavorite ? 'slds-show' : 'slds-hide'}" />
                                    <img src="{!$Resource.ShoppingCartIcons + '/Icons/05_heart_gray.png'}" class="{! featuredItem.IsFavorite ? 'slds-hide' : 'slds-show'}" />
                                </button>

                                <span class="slds-p-left_medium">{! featuredItem.Record.Material_Number__c }</span>
                            </div>
                        </div>

                        <div class="slds-m-top_medium">
                            <c:ShoppingCartAvailableFormats record="{! featuredItem.Record }" useColumnSizes="false" containerClass="slds-gutters" />
                        </div>

                        <div class="slds-m-top_medium">
                            <aura:if isTrue="{! featuredItem.Record.Not_Available_For_Order__c == False }">
                                <lightning:button variant="brand" label="ADD TO CART" name="{!featuredItem.Record.Id}" class="button-add-to-cart" onclick="{!c.addToCart}"/>
                            </aura:if>
                        </div>
                    </div>
                </div>
            </aura:iteration>
        </div>
    </aura:if>
    
    <aura:if isTrue="{! !v.featuredItems.length == 0 }">
        There are no featured items.
    </aura:if>
    
</aura:component>